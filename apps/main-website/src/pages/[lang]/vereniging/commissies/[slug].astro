---
import Layout from "../../../../components/Layout.astro";
import type { Config, Media } from "@svsticky/content";
import sdk from "../../../../sdk";
import { convertLexicalToHTML } from "@payloadcms/richtext-lexical/html";

export const getStaticPaths = () => (sdk
  .find({ collection: "main-committee", select: { slug: true } })
  .then(resp => resp.docs.flatMap(({ slug }) => [{params: {lang: "nl", slug}}, {params: {lang: "en", slug}}])));

const { lang, slug } = Astro.params as { lang: Config["locale"], slug: string };

const committee = (await sdk.find({ collection: "main-committee", where: { slug: { equals: slug } }, limit: 1, locale: lang })).docs[0];
---

<Layout title={lang === "nl" ? "Adviesraad" : "Advisory board"}>
  <main>
    <!-- WITTE KAART -->
    <div class="committee-card">

      <!-- TITEL -->
      <div class="committee-header">
        <h1 class="committee-title">{committee.name}</h1>
      </div>

      <div class="committee-content">

        <!-- LOGO -->
        <div class="logo-wrapper">
          <img 
            src={(committee.logo as Media).url}
            alt={`Logo ${committee.name}`}
          />
        </div>

        <!-- TEKST RECHTS -->
        <div class="committee-text">
          <div class="info-block" set:html={convertLexicalToHTML({ data: committee.about })}></div>
        </div>
      </div>
    </div>

    <!-- NAVIGATIEKNOPPEN -->
    <div class="committee-nav">
      <a href={`/${lang}/vereniging/commissies`} class="nav-btn back">‚Üê Terug naar overzicht</a>
    </div>
  </main>
</Layout>

<style>

/* LAYOUT */
main {
  width: 90%;
  max-width: 70rem;
  margin: 0 auto;
  padding-bottom: 4rem;
  color: #242424;
}

/* ======================= */
/*   WITTE KAART           */
/* ======================= */

.committee-card {
  background: white;
  padding: 2.5rem;
  border-radius: 1.2rem;
  box-shadow: 0 1rem 2rem rgba(0,0,0,0.06);
  margin: 3rem 0;
}

/* HEADER */
.committee-header {
  margin-bottom: 1.6rem;
}

.committee-title {
  margin: 0;
  font-size: 2rem;
  font-weight: 800;
  color: var(--theme-color);
}

/* ======================= */
/* GRID (1/4 - 3/4)        */
/* ======================= */

.committee-content {
  display: grid;
  grid-template-columns: 1fr 3fr;  /* <<< 1/4 logo, 3/4 tekst */
  gap: 2.2rem;
  align-items: start;
}

/* LOGO */
.logo-wrapper {
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.logo-wrapper img {
  width: 100%;
  max-width: 220px;
  object-fit: contain;
  display: block;
}

/* ======================= */
/* INFO-BLOKKEN            */
/* ======================= */

.info-block {
  margin-bottom: 1.8rem;
}

.info-block h3 {
  margin: 0;
  font-size: 1.35rem;
  font-weight: 800;
  color: var(--theme-color);
}

.info-block p {
  margin: 0.4rem 0 0;
  font-size: 1rem;
  line-height: 1.45;
}

/* ======================= */
/* NAVIGATIEKNOPPEN        */
/* ======================= */

.committee-nav {
  margin-top: 2rem;
  display: flex;
  justify-content: center;
}

.nav-btn {
  background: #fa6b20;
  color: white;
  padding: 0.8rem 1.6rem;
  border-radius: 0.6rem;
  text-decoration: none;
  font-weight: 600;
}

.nav-btn:hover {
  filter: brightness(0.9);
}

/* ======================= */
/* RESPONSIVE              */
/* ======================= */

@media (max-width: 800px) {
  .committee-content {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .logo-wrapper {
    margin-bottom: 1rem;
  }
}

</style>
